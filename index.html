<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MrStore - Cadastro/Login</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: url('https://i.imgur.com/sI8LmKe.png') no-repeat center center fixed;
    background-size: cover;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .container {
    background: rgba(0,0,0,0.75);
    padding: 30px;
    border-radius: 10px;
    width: 320px;
    text-align: center;
  }
  input {
    width: 90%;
    padding: 10px;
    margin: 10px 0;
    border-radius: 6px;
    border: none;
    font-size: 1rem;
  }
  button {
    padding: 10px 20px;
    background: gold;
    border: none;
    border-radius: 6px;
    font-weight: bold;
    cursor: pointer;
  }
  a {
    color: gold;
    cursor: pointer;
    display: block;
    margin-top: 15px;
  }
</style>
</head>
<body>

<div class="container">
  <h2 id="form-title">Cadastro</h2>
  <input type="email" id="email" placeholder="E-mail" />
  <input type="password" id="password" placeholder="Senha" />
  <button id="submit-btn">Cadastrar</button>
  <a id="toggle-link">Já tem uma conta? Fazer login</a>
  <p id="message" style="color: yellow; margin-top: 10px;"></p>
</div>

<script>
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const submitBtn = document.getElementById('submit-btn');
  const toggleLink = document.getElementById('toggle-link');
  const formTitle = document.getElementById('form-title');
  const message = document.getElementById('message');

  let isLogin = false;

  toggleLink.addEventListener('click', () => {
    isLogin = !isLogin;
    if(isLogin) {
      formTitle.textContent = 'Login';
      submitBtn.textContent = 'Entrar';
      toggleLink.textContent = 'Não tem conta? Cadastrar';
      message.textContent = '';
    } else {
      formTitle.textContent = 'Cadastro';
      submitBtn.textContent = 'Cadastrar';
      toggleLink.textContent = 'Já tem uma conta? Fazer login';
      message.textContent = '';
    }
  });

  submitBtn.addEventListener('click', () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();

    if(!email || !password) {
      message.textContent = 'Preencha todos os campos!';
      return;
    }

    let users = JSON.parse(localStorage.getItem('mrstore_users') || '{}');

    if(isLogin) {
      // Login
      if(users[email] && users[email] === password) {
        // Salva usuário logado
        localStorage.setItem('mrstore_logged', email);
        window.location.href = 'loja.html';
      } else {
        message.textContent = 'Usuário ou senha inválidos!';
      }
    } else {
      // Cadastro
      if(users[email]) {
        message.textContent = 'Esse e-mail já está cadastrado!';
        return;
      }
      users[email] = password;
      localStorage.setItem('mrstore_users', JSON.stringify(users));
      // Inicializa moedas para o usuário
      localStorage.setItem('mrstore_coins_' + email, '10000'); // já começa com 10k Mrcoin
      message.style.color = 'lightgreen';
      message.textContent = 'Cadastro feito com sucesso! Agora faça login.';
      // limpa campos
      emailInput.value = '';
      passwordInput.value = '';
      isLogin = true;
      formTitle.textContent = 'Login';
      submitBtn.textContent = 'Entrar';
      toggleLink.textContent = 'Não tem conta? Cadastrar';
    }
  });
</script>

</body>
</html>
